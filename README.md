````md
# Editing Markdown Pages (This Repo)

This repository is a Jekyll site. Most pages are **top-level `.md` files** (e.g., `teaching.md`, `research.md`) that Jekyll converts into HTML in `_site/`.

You can preview content in two ways:

1) **VS Code Markdown Preview** (quick formatting check)  
2) **External browser preview** via the local Jekyll server (full site layout + CSS) on **port 4000**

---

## Repo structure (based on `tree -L 2`)

Key files/folders you’ll use:

- `_config.yml` — site configuration
- `_layouts/default.html` — main page layout (HTML template)
- `assets/` — images and static files (example: `assets/profile.png`)
- Top-level pages (edit these):
  - `index.md`
  - `teaching.md`
  - `teachingundergrad.md`
  - `research.md`
  - `publications.md`
  - `grants.md`
  - `grantdetails.md`
  - plus any other `*.md` at repo root (e.g., `a.md`, `index1.md`)
- `_site/` — **generated output** (do not edit manually)

Scripts:
- `0_run_server.sh` — starts local preview server  
  Current content:
  ```sh
  bundle exec jekyll serve --livereload
````

---

## 1) What to edit (and what NOT to edit)

- Edit:

* Any **top-level `.md`** file you want to change (example: `teachingundergrad.md`)
* `_layouts/default.html` if you want to change the site template/layout
* `_config.yml` if you want to change site-level settings
* `assets/*` for images and static assets

- Do NOT edit:

* Anything inside `_site/`
  `_site/` is generated by Jekyll each time you build/serve.

> If you see `*_site/*.md` files: those are just generated copies—still don’t edit them.

---

## 2) Add a new page in THIS repo

Because your pages live at the repo root, the simplest pattern is:

1. Create a new file at the repo root, for example:

   * `newpage.md`

2. Add Jekyll front matter at the top:

```yaml
---
layout: default
title: "New Page"
permalink: /newpage/
---
```

3. Write Markdown content below the front matter.

4. Start the server and visit:

* `http://localhost:4000/newpage/`

---

## 3) Preview Markdown inside VS Code

Fast formatting check while editing.

1. Open any `.md` file
2. Start preview:

   * **Windows/Linux:** `Ctrl + Shift + V`
   * **macOS:** `Cmd + Shift + V`

Or:

* Command Palette → **Markdown: Open Preview**
* Or **Open Preview to the Side**

### Important

VS Code preview does **not** apply your Jekyll layout (`_layouts/default.html`) or site CSS exactly.
Use the browser preview on `localhost:4000` to confirm final rendering.

---

## 4) Preview the full site in a browser (port 4000)

### Install dependencies once

From the repo root (where `Gemfile` is):

```bash
bundle install
```

### Run the local server

Your repo already provides a script:

```bash
./0_run_server.sh
```

This runs:

```bash
bundle exec jekyll serve --livereload
```

By default, Jekyll serves on:

* `http://localhost:4000`

Open that in any browser.

---

## 5) Typical edit workflow

1. Edit a page (example):

   * `teachingundergrad.md`
2. Check formatting quickly using VS Code Preview
3. Verify full site rendering in the browser:

   * `http://localhost:4000`
4. Commit/push changes:

```bash
git status
git add .
git commit -m "Update teaching undergrad page"
git push
```

---

## 6) Links and images for this repo

### Internal links

Since your main pages are at the root, link using clean site paths:

```md
[Teaching](/teaching/)
[Undergrad Teaching](/teachingundergrad/)
[Research](/research/)
[Publications](/publications/)
```

(These depend on the `permalink` used in each page’s front matter. If no permalink is set, Jekyll may use the filename.)

### Images

Put images in `assets/` and reference them like:

```md
![Profile](/assets/profile.png)
```

---

## 7) Troubleshooting

### `_site/` not updating

Make sure the server is running:

```bash
./0_run_server.sh
```

Then reload `http://localhost:4000`.

### Port 4000 already in use

Run Jekyll on another port:

```bash
bundle exec jekyll serve --livereload --port 4001
```

### Page builds but layout looks wrong

* Check the page has front matter (`---` block at top)
* Confirm it uses:

  ```yaml
  layout: default
  ```
* Check `_layouts/default.html` and any CSS/assets referenced there

### YAML front matter errors

YAML is indentation-sensitive. Common fixes:

* Use quotes around titles with special characters:

  ```yaml
  title: "Research: 2025–2026"
  ```

---

## Quick Commands

Install:

```bash
bundle install
```

Run local server (preferred):

```bash
./0_run_server.sh
```

Or run directly:

```bash
bundle exec jekyll serve --livereload
```

Open:

* `http://localhost:4000`

